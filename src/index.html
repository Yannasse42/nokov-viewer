<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="app.title">Nokov Viewer</title>

  <!-- Material Icons OFFLINE -->
  <link rel="stylesheet" href="iconfont/material-icons.css">

  <!-- Ton style -->
  <link rel="stylesheet" href="style.css" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/three.min.js"></script>
  <script src="js/OrbitControls.js"></script>
  




</head>

<body>

  <!-- HEADER AVEC LOGO NOKOV -->
  <div class="header">
      <div class="header-inner">
          <img src="images/nokov_logo.png" class="header-logo-img" alt="logo">
      </div>
  </div>


  <!-- ==================================================== -->
  <!-- ðŸ  PAGE D'ACCUEIL -->
  <!-- ==================================================== -->
    <!-- ðŸ  PAGE D'ACCUEIL -->
    <div id="page_home" class="page active">

    <div class="page-header">
        <div class="home-title">
            <h2 class="section-title" data-i18n="home.welcome_title">Bienvenue</h2>
            <p class="section-subtitle" data-i18n="home.welcome_subtitle">
                Choisissez un mode dâ€™analyse
            </p>
        </div>

        <button class="help-btn" data-help-id="home">
            <span class="material-icons-outlined">help_outline</span>
        </button>
    </div>



    <div class="home-options">

        <div class="home-card" id="go_one">
        <h2 data-i18n="home.single.title">Analyse dâ€™un essai</h2>
        <p data-i18n="home.single.desc">Importer et analyser une seule marche.</p>
        </div>

        <div class="home-card" id="go_compare">
        <h2 data-i18n="home.compare.title">Comparer deux essais</h2>
        <p data-i18n="home.compare.desc">Comparer deux sessions de marche.</p>
        </div>

    </div>

    </div>



    <!-- ðŸ”µ PAGE ANALYSE 1 ESSAI -->
    <div id="page_one" class="page">

    <button class="return-btn" id="btn_return_home_one">
        <span class="material-icons-outlined">arrow_back</span>
        <span data-i18n="common.back">Retour</span>
    </button>

    <div class="page-header">
        <h2 class="section-title" data-i18n="single.title">Analyse dâ€™un essai</h2>
        <button class="help-btn" data-help-id="one">
        <span class="material-icons-outlined">help_outline</span>
        </button>
    </div>

    <div class="form-card">

        <div class="field">
          <label for="one_nom" data-i18n="single.name">Nom de lâ€™essai</label>
          <input type="text" id="one_nom">
        </div>

        <div class="field">
          <label data-i18n="single.folder">Dossier de lâ€™essai</label>
          <div class="dossier-container">
            <input type="text" id="one_dossier" class="drop-zone" readonly>
            <button id="btn_one_dossier" data-i18n="common.choose">Choisir</button>
          </div>
        </div>

        <button id="btn_one_validate" data-i18n="single.analyze">Analyser</button>

    </div>

    <!-- ONGLET NAV -->
    <div id="tabs-one" class="tab-bar" style="display:none;">
        <button class="tab-btn active" data-tab="tab-curves-one" data-i18n="tabs.curves">Courbes</button>
        <button class="tab-btn" data-tab="tab-pst-one" data-i18n="tabs.pst">PST</button>
        <button class="tab-btn" data-tab="tab-kinetics-one">CinÃ©tique</button>
    </div>

    <!-- ONGLET COURBES -->
    <div id="tab-curves-one" class="tab-content active" style="display:none;">

        <div class="tab-header">
            <span data-i18n="tabs.curves">Courbes</span>
            <button class="help-btn" data-help-id="curves">
            <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>


        <!-- ðŸ”µ Zone commune : Plan (mÃªme structure que compare) -->
        <div class="plane-view-container">

            <div class="plane-selector">
                <span data-i18n="planes.label">Plan :</span>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="sagittal" checked>
                    <span data-i18n="planes.sagittal">Plan sagittal</span>
                </label>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="frontal">
                    <span data-i18n="planes.frontal">Plan frontal</span>
                </label>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="transverse">
                    <span data-i18n="planes.transverse">Plan transverse</span>
                </label>
            </div>

            <!-- Pas de bouton view-mode pour page ONE -->
        </div>

        <div id="charts_one" class="charts-grid"></div>
        <div id="kinematic_one" class="kinematic-card" style="display:none;">
            
            <div class="kinematic-header">
                <h3 class="kinematic-title">
                    ParamÃ¨tres cinÃ©matiques â€“ <span id="kinematic-plane-title">Sagittal</span>
                </h3>
                <button class="help-btn" data-help-id="kinematic">
                    <span class="material-icons-outlined">help_outline</span>
                </button>
            </div>

            <table class="kinematic-table" id="kinematic-table-one"></table>
        </div>
    </div>

    <!-- ONGLET PST -->
    <div id="tab-pst-one" class="tab-content" style="display:none;">

        <div class="tab-header">
            <span data-i18n="tabs.pst">PST</span>
            <button class="help-btn" data-help-id="pst">
            <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>


        <h2 class="pst-title" data-i18n="pst.title">PST â€” ParamÃ¨tres spatio-temporels</h2>

        <div class="pst-section">
            <h3 data-i18n="pst.global_section">Global</h3>
            <table class="pst-table" id="pst-global-one"></table>
        </div>

        <div class="pst-columns">
            <div class="pst-section">
                <h3 data-i18n="pst.left_title">CÃ´tÃ© Gauche</h3>
                <table class="pst-table" id="pst-left-one"></table>
            </div>

            <div class="pst-section">
                <h3 data-i18n="pst.right_title">CÃ´tÃ© Droit</h3>
                <table class="pst-table" id="pst-right-one"></table>
            </div>
        </div>

        <div class="pst-section pst-radar-section">
            <div class="pst-radar-header">
                <h3 data-i18n="pst.radar_title">Profil spatio-temporel (radar)</h3>
                <button class="help-btn" data-help-id="pst_radar">
                    <span class="material-icons-outlined">help_outline</span>
                </button>
            </div>
            <div class="pst-radar-wrapper">
                <canvas id="pst-radar-canvas-one"></canvas>
            </div>
        </div>
    </div>

    <!-- ONGLET CINÃ‰TIQUE â€” Analyse 1 essai -->
    <div id="tab-kinetics-one" class="tab-content" style="display:none;">

        <div class="tab-header">
            <span>CinÃ©tique â€“ Forces au sol</span>
            <button class="help-btn" data-help-id="kinetics">
                <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>

        <div class="kinetic-card">

            <!-- SÃ©lecteur 2D / 3D -->
            <div class="kinetic-mode-selector">
                <label class="kinetic-btn">
                    <input type="radio" name="kinetic-dim" value="2d" checked>
                    <span>Vue 2D</span>
                </label>

                <label class="kinetic-btn">
                    <input type="radio" name="kinetic-dim" value="3d">
                    <span>Vue 3D</span>
                </label>
            </div>

            <!-- Zone GRF -->
            <div class="kinetic-graph-area" id="kinetic-graph-area">
                <div id="grf-3d-container"></div>
            </div>
            

        </div>

    </div>


  </div>

  <!-- ==================================================== -->
  <!-- ðŸŸ  PAGE COMPARAISON -->
  <!-- ==================================================== -->
  <div id="page_compare" class="page">

    <button class="return-btn" id="btn_return_home_compare">
        <span class="material-icons-outlined">arrow_back</span>
        <span data-i18n="common.back">Retour</span>
    </button>
    <!-- ðŸ”¥ HEADER UNIFIÃ‰ comme page ONE -->
    <div class="page-header">
        <h2 class="section-title" data-i18n="compare.title">Comparer deux essais</h2>
        <button class="help-btn" data-help-id="compare">
            <span class="material-icons-outlined">help_outline</span>
        </button>
    </div>

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:25px;">

        <div class="form-card">
            <h3 data-i18n="compare.test1">Essai 1</h3>

            <div class="field">
              <label for="nom1" data-i18n="compare.name1">Nom essai 1</label>
              <input type="text" id="nom1">
            </div>

            <div class="field">
              <label data-i18n="compare.folder1">Dossier essai 1</label>
              <div class="dossier-container">
                <input type="text" id="dossier1" class="drop-zone" readonly>
                <button id="btn-choisir1" data-i18n="common.choose">Choisir</button>
              </div>
            </div>
        </div>

        <div class="form-card">
            <h3 data-i18n="compare.test2">Essai 2</h3>

            <div class="field">
              <label for="nom2" data-i18n="compare.name2">Nom essai 2</label>
              <input type="text" id="nom2">
            </div>

            <div class="field">
              <label data-i18n="compare.folder2">Dossier essai 2</label>
              <div class="dossier-container">
                <input type="text" id="dossier2" class="drop-zone" readonly>
                <button id="btn-choisir2" data-i18n="common.choose">Choisir</button>
              </div>
            </div>
        </div>

    </div>

    <button id="validate-btn" data-i18n="compare.run">Comparer</button>

    <!-- Onglets -->
    <div id="tabs-compare" class="tab-bar" style="display:none;">
        <button class="tab-btn active" data-tab="tab-curves-compare" data-i18n="tabs.curves">Courbes</button>
        <button class="tab-btn" data-tab="tab-pst-compare" data-i18n="tabs.pst">PST</button>
        <button class="tab-btn" data-tab="tab-kinetics-compare">CinÃ©tique</button>
    </div>


    <!-- ONGLET COURBES COMPARAISON -->
    <div id="tab-curves-compare" class="tab-content" style="display:none;">

        <!-- Header de lâ€™onglet Courbes -->
        <div class="tab-header">
            <span data-i18n="tabs.curves">Courbes</span>
            <button class="help-btn" data-help-id="curves">
                <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>

        <!-- ðŸ”µ Zone commune : Plan + Mode d'affichage -->
        <div class="plane-view-container">
            <div class="plane-selector">
                <span data-i18n="planes.label">Plan :</span>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="sagittal" checked>
                    <span data-i18n="planes.sagittal">Plan sagittal</span>
                </label>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="frontal">
                    <span data-i18n="planes.frontal">Plan frontal</span>
                </label>

                <label class="plane-btn">
                    <input type="radio" name="plane" value="transverse">
                    <span data-i18n="planes.transverse">Plan transverse</span>
                </label>
            </div>

            <div class="view-mode-inline">
                <button id="toggle-view" class="toggle-btn" data-i18n="compare.view6">
                    Vue : 6 graphes
                </button>
            </div>
        </div>

        <!-- GRILLES GRAPHIQUES -->
        <div id="charts_container" class="charts-grid"></div>
        
        <!-- CINÃ‰MATIQUE COMPARAISON â€” placÃ© sous les courbes -->
        <div class="kinematic-header">
            <h3 id="kinematic-compare-title"></h3>
            <button class="help-btn" data-help-id="kinematic">
                <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>

        <div id="tab-kinematic-compare" style="margin-top:30px;">
            <div class="pst-compare-container">

                <!-- âš ï¸ ici on enlÃ¨ve lâ€™ID en double -->
                <h3 class="pst-subtitle" id="kinematic-compare-subtitle"></h3>

                <div class="delta-info" id="kinematic-compare-delta-info"></div>

                <table class="kinematic-table-compare" id="kinematic-compare-table"></table>

            </div>
        </div>

    </div>

    <!-- PST Comparaison -->
    <div id="tab-pst-compare" class="tab-content" style="display:none;">

        <!-- Header de lâ€™onglet PST -->
        <div class="tab-header">
            <span data-i18n="tabs.pst">PST</span>
            <button class="help-btn" data-help-id="pst">
                <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>

        <div class="pst-compare-container">

            <h3 class="pst-subtitle" id="pst-title-global"></h3>

            <table class="pst-table-compare" id="pst-global-table"></table>

            <div class="pst-divider"></div>

            <h3 class="pst-subtitle" id="pst-title-bilat"></h3>

            <div class="delta-info" id="pst-delta-info"></div>

            <table class="pst-table-compare" id="pst-bilat-table"></table>

            <!-- ðŸŸ¡ Radar Comparatif -->
            <div class="pst-radar-section">
                <div class="pst-radar-header">
                    <h3 data-i18n="pst.radar_title">Profil spatio-temporel â€“ Comparaison</h3>
                    <button class="help-btn" data-help-id="pst_radar">
                        <span class="material-icons-outlined">help_outline</span>
                    </button>
                </div>
                <div class="pst-radar-wrapper">
                    <canvas id="pst-radar-canvas-compare"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- ONGLET CINÃ‰TIQUE â€” Comparaison -->
    <div id="tab-kinetics-compare" class="tab-content" style="display:none;">

        <div class="tab-header">
            <span>CinÃ©tique â€” Comparaison</span>
            <button class="help-btn" data-help-id="kinetics">
                <span class="material-icons-outlined">help_outline</span>
            </button>
        </div>

        <div class="kinetic-card">

            <!-- SÃ©lecteur 2D / 3D -->
            <div class="kinetic-mode-selector">
                <label class="kinetic-btn">
                    <input type="radio" name="kinetic-dim-compare" value="2d" checked>
                    <span>Vue 2D</span>
                </label>

                <label class="kinetic-btn">
                    <input type="radio" name="kinetic-dim-compare" value="3d">
                    <span>Vue 3D</span>
                </label>
            </div>

            <!-- Zone GRF comparaison -->
            <div class="kinetic-graph-area" id="kinetic-graph-area-compare">
                <p class="kinetic-placeholder-text">Graphique comparatif en dÃ©veloppementâ€¦</p>
            </div>
        </div>

    </div>


    </div>


  </div>


  <!-- ðŸ”¥ LOADING OVERLAY GLOBAL -->
  <div id="loading-overlay" class="loading-overlay">
      <div class="loading-box">
          <div class="loading-title" data-i18n="loading.title">Chargementâ€¦</div>
          <div class="loading-bar">
              <div class="loading-progress"></div>
          </div>
      </div>
  </div>

    <!-- ===================== HELP MODAL ===================== -->
   <div id="help-modal" class="help-modal hidden">
     <div class="help-backdrop"></div>
     <div class="help-box">
     <div class="help-header">
        <span id="help-title">Aide</span>
       <button id="help-close" class="help-close">âœ•</button>
     </div>
     <div id="help-body" class="help-body"></div>
     <div class="help-footer">
       <button id="help-ok" class="btn primary">OK</button>
     </div>
    </div>
   </div>


  <script src="translations.js"></script>
  <script src="i18n.js"></script>
  <script src="pst.js"></script>
  <script src="charts.js"></script>
  <script src="renderer.js"></script>
  <script src="kinetics.js"></script>

</body>
</html>
